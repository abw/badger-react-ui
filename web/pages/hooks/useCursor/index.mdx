import React       from 'react'
import Component   from './_examples/useCursor.tsx'
import Source      from './_examples/useCursor.tsx?raw'
import DescTable   from '@/web/site/DescTable.jsx'
import PropsTable  from '@/web/site/PropsTable.jsx'
import { Example } from '@abw/badger-website'
import { DropdownMenuLink, SelectLink } from '@/web/site/Links.jsx'

# useCursor

<div className="large">
  This hook can be used to define a cursor for indexing an array of options,
  such as those used in the DropdownMenu and Select components.
</div>

The `useCursor()` hook should be passed an `options` property which is an
array of selectable options.  It can also accept a `cursor` number to define
the initial value for the cursor.  A `validOption` function can be specified
which will determine if an option is valid and can be selected.

The hook returns a copy of the `options`, the current `cursor` (which may be
`null` or `undefined`), and functions to set the cursor to a specific value
(`setCursorIndex`), the first valid value (`setCursorFirst`), the last valid
value (`setCursorLast`), and the next and previous valid values (`setCursorNext`
and `setCursorPrev` respectively).  The `clearCursor` function can be used to
clear the current cursor value, effectively resetting the state.

Debugging is enabled in this example.  Open the Javascript console if you want
to see what's happening behind the scenes.

<Example
  Component={Component}
  code={Source}
  highlightLines="16-26,40,48,51,54,57,60,70,73,76,79,82"
  expand
/>

## Properties

The following properties may be passed to the `useCursor()` hook as
configuration options.

<PropsTable
  items={[
    ['options',     '',             'An array of options for the cursor to index.'],
    ['cursor',      '',             'An initial value for the cursor.'],
    ['validOption', 'validOption',  'A function to determine if an option is valid and can be selected. The default function ignores objects that contain a `disabled`, `heading` or `separator` property.'],
    ['debug',       'false',        'Enable debugging messages in the Javascript console.'],
    ['debugPrefix', 'Cursor > ',    'Prefix string for debugging messages.'],
    ['debugColor',  '',             'CSS color for `debugPrefix`.'],
  ]}
/>

## State

The following items are returned by the `useTrigger()` hook.

<DescTable
  items={[
    ['options',        'The array of options that the cursor is indexing.'],
    ['cursor',         'The current cursor value.  This can be `undefined` or `null`.  Otherwise it will be a valid index into `options`, e.g. from `0` to `options.length - 1`'],
    ['firstIndex',     'Function to return the first valid index in the `options` array.'],
    ['lastIndex',      'Function to return the last valid index in the `options` array.'],
    ['nextIndex',      'Function to return the next valid index in the `options` array.'],
    ['prevIndex',      'Function to return the previous valid index in the `options` array.'],
    ['setCursorFirst', 'Function to set the cursor to the first valid index in the `options` array.'],
    ['setCursorLast',  'Function to set the cursor to the last valid index in the `options` array.'],
    ['setCursorNext',  'Function to set the cursor to the next valid index in the `options` array.'],
    ['setCursorPrev',  'Function to set the cursor to the previous valid index in the `options` array.'],
    ['setCursorIndex', 'Function to set the cursor to a specific index.  If the index is not valid then it will be clamped to the closest valid index.'],
    ['setCursor',      'Function to directly set the cursor, bypassing all safety checked and side-effects.  Use carefully.  The `setCursorIndex` function is probably what you should be using instead.'],
    ['clearCursor',    'Function to clear the cursor and reset the state.'],
  ]}
/>

## Typescript Notes

The `useCursor` hook accepts a generic type parameter to specify the type of
the items in the `options` array.  The default value is `SelectOption` which
is used in the <SelectLink/> and <DropdownMenuLink/> components.

